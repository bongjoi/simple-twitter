(this["webpackJsonpsimple-twitter"]=this["webpackJsonpsimple-twitter"]||[]).push([[0],{42:function(e,t,c){},56:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c(2),a=c.n(r),s=c(34),i=c.n(s),j=(c(42),c(15)),o=c(6),l=c(7),u=c(23);c(43),c(57),c(45);u.a.initializeApp({apiKey:"AIzaSyD2JvdJrxJ2NdLZ6xQRaiOMN4kswzW-adA",authDomain:"daily-tweet-6702c.firebaseapp.com",databaseURL:"https://daily-tweet-6702c.firebaseio.com",projectId:"daily-tweet-6702c",storageBucket:"daily-tweet-6702c.appspot.com",messagingSenderId:"204475601065",appId:"1:204475601065:web:7d3ad3c2499c4c628559b8"});var b=u.a,d=u.a.auth(),O=u.a.storage(),x=u.a.firestore(),h=function(){return Object(n.jsxs)("div",{className:"loader",children:[Object(n.jsx)("span",{}),Object(n.jsx)("span",{}),Object(n.jsx)("span",{})]})},p=Object(r.createContext)(),m=function(e){var t=e.children,c=Object(r.useState)(null),a=Object(l.a)(c,2),s=a[0],i=a[1],j=Object(r.useState)(!0),o=Object(l.a)(j,2),u=o[0],b=o[1];return Object(r.useEffect)((function(){d.onAuthStateChanged((function(e){i(e),b(!1)}))}),[]),u?Object(n.jsx)(h,{}):Object(n.jsx)(p.Provider,{value:{currentUser:s},children:t})},f=c(16),v=c(36),g=function(e){var t=e.children,c=Object(v.a)(e,["children"]),a=Object(r.useContext)(p).currentUser;return Object(n.jsx)(o.b,Object(f.a)(Object(f.a)({},c),{},{children:Boolean(a)?t:Object(n.jsx)(o.a,{to:"/login"})}))},w=c(12),k=c(25),N=c(19),C=function(){var e=Object(o.g)(),t=Object(r.useCallback)((function(){d.signOut(),e.push("/")}),[e]);return Object(n.jsxs)("div",{className:"navigation-block",children:[Object(n.jsxs)(j.b,{to:"/",children:[Object(n.jsx)(w.a,{icon:k.a}),Object(n.jsx)("span",{children:"Home"})]}),Object(n.jsxs)(j.b,{to:"/profile",children:[Object(n.jsx)(w.a,{icon:N.f}),Object(n.jsx)("span",{children:"Profile"})]}),Object(n.jsxs)("button",{className:"logout-button",onClick:t,children:[Object(n.jsx)(w.a,{icon:N.d}),Object(n.jsx)("span",{children:"Logout"})]})]})},y=c(9),S=c.n(y),U=c(20),A=function(e){var t=e.currentUser,c=Object(r.useState)(""),a=Object(l.a)(c,2),s=a[0],i=a[1],j=Object(r.useState)(null),o=Object(l.a)(j,2),u=o[0],b=o[1],d=Object(r.useState)(""),h=Object(l.a)(d,2),p=h[0],m=h[1],f=Object(r.useState)(""),v=Object(l.a)(f,2),g=v[0],k=v[1];var C=Object(r.useCallback)((function(e){var t=e.target.files[0];t&&(b(t),function(e){var t=new FileReader;t.readAsDataURL(e),t.onerror=function(){return k("\uc624\ub958 \ubc1c\uc0dd")},t.onloadend=function(e){var t=e.target.result;m(t)}}(t))}),[]),y=Object(r.useCallback)((function(e){i(e.target.value)}),[]),A=Object(r.useCallback)(function(){var e=Object(U.a)(S.a.mark((function e(c){var n,r,a,j;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),""!==s){e.next=3;break}return e.abrupt("return");case 3:if(n="",!p){e.next=12;break}return r=O.ref().child("".concat(t.uid,"/").concat(Date.now(),"_").concat(u.name)),e.next=8,r.putString(p,"data_url");case 8:return a=e.sent,e.next=11,a.ref.getDownloadURL();case 11:n=e.sent;case 12:return e.prev=12,j={text:s,createdAt:Date.now(),creatorId:t.uid,creatorName:t.displayName,imageUrl:n},e.next=16,x.collection("tweets").add(j);case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(12),console.error(e.t0),k("\uc624\ub958 \ubc1c\uc0dd");case 22:i(""),b(null),m(""),k("");case 26:case"end":return e.stop()}}),e,null,[[12,18]])})));return function(t){return e.apply(this,arguments)}}(),[s,u,p,t.uid,t.displayName]),D=Object(r.useCallback)(Object(U.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(null),m("");case 2:case"end":return e.stop()}}),e)}))),[]);return Object(n.jsx)("div",{className:"upload-form-block",children:Object(n.jsxs)("form",{onSubmit:A,children:[Object(n.jsxs)("div",{className:"text-form",children:[Object(n.jsx)("input",{type:"text",placeholder:"\uc624\ub298 \ud558\ub8e8\ub294 \uc5b4\ub560\ub098\uc694?",value:s,onChange:y,maxLength:120,required:!0}),Object(n.jsx)("button",{children:Object(n.jsx)(w.a,{icon:N.a})})]}),Object(n.jsxs)("div",{className:"image-form",children:[!u&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("label",{children:[Object(n.jsx)("input",{type:"file",accept:"image/*",onChange:C}),Object(n.jsx)(w.a,{icon:N.c})]}),Object(n.jsx)("p",{children:"\uc0ac\uc9c4 \ucd94\uac00\ud558\uae30"})]}),u&&p&&Object(n.jsxs)("div",{className:"output",children:[Object(n.jsx)("span",{className:"file-name",children:u.name}),Object(n.jsxs)("div",{className:"image-preview",children:[Object(n.jsx)("img",{src:p,alt:u.name}),Object(n.jsx)("div",{className:"remove-preview",onClick:D,children:Object(n.jsx)(w.a,{icon:N.e})})]})]}),g&&Object(n.jsx)("div",{className:"error",children:g})]})]})})},D=function(){var e=Object(r.useContext)(p).currentUser;return Object(n.jsx)("div",{className:"tweet-factory-block",children:Object(n.jsx)(A,{currentUser:e})})},P=c(26),E=c.n(P);c(55);E.a.locale("ko");var I=function(e){var t=e.tweetObj,c=e.isOwner,a=Object(r.useState)(!1),s=Object(l.a)(a,2),i=s[0],j=s[1],o=Object(r.useCallback)((function(){j((function(e){return!e}))}),[]);return Object(n.jsxs)("div",{className:"tweet-item-block",children:[Object(n.jsxs)("div",{className:"header",children:[Object(n.jsx)("p",{children:t.creatorName}),c&&Object(n.jsxs)("div",{children:[i&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("span",{children:"\uc218\uc815"}),Object(n.jsx)("span",{children:"\uc0ad\uc81c"})]}),Object(n.jsx)("i",{onClick:o,children:Object(n.jsx)(w.a,{icon:N.b})})]})]}),Object(n.jsxs)("div",{className:"body",children:[t.imageUrl&&Object(n.jsx)("div",{className:"image-area",children:Object(n.jsx)("img",{src:t.imageUrl,alt:""})}),Object(n.jsxs)("div",{className:"text-area",children:[Object(n.jsx)("p",{className:"content",children:t.text}),Object(n.jsx)("p",{className:"time",children:E()(t.createdAt).fromNow()})]})]})]})},R=function(){var e=Object(r.useContext)(p).currentUser,t=Object(r.useState)([]),c=Object(l.a)(t,2),a=c[0],s=c[1];return Object(r.useEffect)((function(){x.collection("tweets").orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(f.a)({id:e.id},e.data())}));s(t)}))}),[]),Object(n.jsx)("div",{className:"tweet-list-block",children:a.map((function(t){return Object(n.jsx)(I,{tweetObj:t,isOwner:t.creatorId===e.uid},t.id)}))})},G=function(){return Object(n.jsx)("div",{className:"home-block",children:Object(n.jsxs)("div",{className:"home-inner",children:[Object(n.jsx)(C,{}),Object(n.jsx)(D,{}),Object(n.jsx)(R,{})]})})},L=function(e){var t=e.children;return Object(n.jsx)("div",{className:"auth-block",children:Object(n.jsxs)("div",{className:"white-box",children:[Object(n.jsx)("div",{className:"logo-area",children:Object(n.jsx)(w.a,{icon:k.a})}),t]})})},J={login:"\ub85c\uadf8\uc778",register:"\ud68c\uc6d0\uac00\uc785"},W=function(e){var t=e.type,c=e.form,r=e.onChange,a=e.onSubmitEmail,s=e.onSubmitGoogle,i=e.error,o=J[t],l=c.email,u=c.username,b=c.password;return Object(n.jsxs)("div",{className:"auth-form-block",children:[Object(n.jsx)("h2",{children:o}),Object(n.jsxs)("form",{children:[Object(n.jsx)("input",{type:"email",name:"email",placeholder:"\uc774\uba54\uc77c",value:l,onChange:r,required:!0}),"register"===t&&Object(n.jsx)("input",{type:"text",name:"username",placeholder:"\uc774\ub984",value:u,onChange:r,required:!0}),Object(n.jsx)("input",{type:"password",name:"password",placeholder:"\ube44\ubc00\ubc88\ud638",value:b,onChange:r,required:!0}),i&&Object(n.jsx)("p",{className:"error",children:i}),Object(n.jsx)("button",{className:"email-button",onClick:u?a(l,b,u):a(l,b),children:o})]}),Object(n.jsx)("div",{className:"divider",children:"OR"}),Object(n.jsx)("div",{className:"social-button",children:Object(n.jsx)("button",{className:"google-button",onClick:s,children:"Google\ub85c \uacc4\uc18d\ud558\uae30"})}),Object(n.jsx)("div",{className:"link",children:"login"===t?Object(n.jsx)(j.b,{to:"/register",children:"\ud68c\uc6d0\uac00\uc785"}):Object(n.jsx)(j.b,{to:"/login",children:"\ub85c\uadf8\uc778"})})]})},q=c(24);function B(e,t){return Object(f.a)(Object(f.a)({},e),{},Object(q.a)({},t.name,t.value))}function z(e){var t=Object(r.useReducer)(B,e),c=Object(l.a)(t,2),n=c[0],a=c[1];return[n,Object(r.useCallback)((function(e){a(e.target)}),[a])]}var F=function(){var e=z({email:"",password:""}),t=Object(l.a)(e,2),c=t[0],a=t[1],s=Object(r.useState)(""),i=Object(l.a)(s,2),j=i[0],o=i[1],u=Object(r.useCallback)((function(e,t){return function(){var c=Object(U.a)(S.a.mark((function c(n){return S.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n.preventDefault(),c.prev=1,c.next=4,d.signInWithEmailAndPassword(e,t);case 4:c.next=10;break;case 6:c.prev=6,c.t0=c.catch(1),console.error(c.t0),o("\ub85c\uadf8\uc778 \uc2e4\ud328");case 10:case"end":return c.stop()}}),c,null,[[1,6]])})));return function(e){return c.apply(this,arguments)}}()}),[]),O=Object(r.useCallback)(function(){var e=Object(U.a)(S.a.mark((function e(t){var c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,c=new b.auth.GoogleAuthProvider,e.next=5,d.signInWithPopup(c);case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0),o("\ub85c\uadf8\uc778 \uc2e4\ud328");case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(n.jsx)(W,{type:"login",form:c,onChange:a,onSubmitEmail:u,onSubmitGoogle:O,error:j})},M=function(){var e=Object(r.useContext)(p).currentUser,t=Object(o.g)();return Object(r.useEffect)((function(){e&&t.push("/")}),[t,e]),Object(n.jsx)(L,{children:Object(n.jsx)(F,{})})},_=function(){var e=z({email:"",password:"",username:""}),t=Object(l.a)(e,2),c=t[0],a=t[1],s=Object(r.useState)(""),i=Object(l.a)(s,2),j=i[0],o=i[1],u=Object(r.useCallback)((function(e,t,c){return function(){var n=Object(U.a)(S.a.mark((function n(r){var a,s;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.prev=1,n.next=4,d.createUserWithEmailAndPassword(e,t);case 4:return a=n.sent,s=a.user,n.next=8,s.updateProfile(Object(f.a)(Object(f.a)({},s),{},{displayName:c}));case 8:n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),console.error(n.t0),o("\ud68c\uc6d0\uac00\uc785 \uc2e4\ud328");case 14:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e){return n.apply(this,arguments)}}()}),[]),O=Object(r.useCallback)(function(){var e=Object(U.a)(S.a.mark((function e(t){var c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,c=new b.auth.GoogleAuthProvider,e.next=5,d.signInWithPopup(c);case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0),o("\ud68c\uc6d0\uac00\uc785 \uc2e4\ud328");case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(n.jsx)(W,{type:"register",form:c,onChange:a,onSubmitEmail:u,onSubmitGoogle:O,error:j})},H=function(){var e=Object(r.useContext)(p).currentUser,t=Object(o.g)();return Object(r.useEffect)((function(){e&&t.push("/")}),[t,e]),Object(n.jsx)(L,{children:Object(n.jsx)(_,{})})},K=function(){return Object(n.jsx)("div",{children:"Profile Page"})},Q=function(){return Object(n.jsx)(m,{children:Object(n.jsx)(j.a,{children:Object(n.jsxs)(o.d,{children:[Object(n.jsx)(g,{path:"/profile",children:Object(n.jsx)(K,{})}),Object(n.jsx)(o.b,{path:"/register",children:Object(n.jsx)(H,{})}),Object(n.jsx)(o.b,{path:"/login",children:Object(n.jsx)(M,{})}),Object(n.jsx)(g,{path:"/",children:Object(n.jsx)(G,{})})]})})})};i.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(Q,{})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.33589e95.chunk.js.map