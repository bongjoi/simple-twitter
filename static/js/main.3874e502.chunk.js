(this["webpackJsonpsimple-twitter"]=this["webpackJsonpsimple-twitter"]||[]).push([[0],{42:function(e,t,c){},54:function(e,t,c){"use strict";c.r(t);var r=c(2),n=c(1),a=c.n(n),s=c(33),i=c.n(s),o=(c(42),c(14)),u=c(6),j=c(8),l=c(23);c(43),c(55),c(45);l.a.initializeApp({apiKey:"AIzaSyD2JvdJrxJ2NdLZ6xQRaiOMN4kswzW-adA",authDomain:"daily-tweet-6702c.firebaseapp.com",databaseURL:"https://daily-tweet-6702c.firebaseio.com",projectId:"daily-tweet-6702c",storageBucket:"daily-tweet-6702c.appspot.com",messagingSenderId:"204475601065",appId:"1:204475601065:web:7d3ad3c2499c4c628559b8"});var b=l.a,d=l.a.auth(),O=l.a.storage(),p=l.a.firestore(),h=l.a.firestore.FieldValue.serverTimestamp,x=function(){return Object(r.jsxs)("div",{className:"loader",children:[Object(r.jsx)("span",{}),Object(r.jsx)("span",{}),Object(r.jsx)("span",{})]})},f=Object(n.createContext)(),m=function(e){var t=e.children,c=Object(n.useState)(null),a=Object(j.a)(c,2),s=a[0],i=a[1],o=Object(n.useState)(!0),u=Object(j.a)(o,2),l=u[0],b=u[1];return Object(n.useEffect)((function(){d.onAuthStateChanged((function(e){i(e),b(!1)}))}),[]),l?Object(r.jsx)(x,{}):Object(r.jsx)(f.Provider,{value:{currentUser:s},children:t})},v=c(19),g=c(36),w=function(e){var t=e.children,c=Object(g.a)(e,["children"]),a=Object(n.useContext)(f).currentUser;return Object(r.jsx)(u.b,Object(v.a)(Object(v.a)({},c),{},{children:Boolean(a)?t:Object(r.jsx)(u.a,{to:"/login"})}))},k=c(16),C=c(25),N=c(22),y=function(){var e=Object(u.g)(),t=Object(n.useCallback)((function(){d.signOut(),e.push("/")}),[e]);return Object(r.jsxs)("div",{className:"navigation-block",children:[Object(r.jsxs)(o.b,{to:"/",children:[Object(r.jsx)(k.a,{icon:C.a}),Object(r.jsx)("span",{children:"Home"})]}),Object(r.jsxs)(o.b,{to:"/profile",children:[Object(r.jsx)(k.a,{icon:N.e}),Object(r.jsx)("span",{children:"Profile"})]}),Object(r.jsxs)("button",{className:"logout-button",onClick:t,children:[Object(r.jsx)(k.a,{icon:N.c}),Object(r.jsx)("span",{children:"Logout"})]})]})},S=c(9),U=c.n(S),P=c(17),E=c(35),I=function(e){var t=e.progress,c=e.imageUrl,a=e.setIsShowProgress;return Object(n.useEffect)((function(){c&&a(!1)}),[c,a]),Object(r.jsx)(E.a.div,{className:"progress-bar",initial:{width:0},animate:{width:t+"%"}})},A=function(e){var t=e.currentUser,c=Object(n.useState)(""),a=Object(j.a)(c,2),s=a[0],i=a[1],o=Object(n.useState)(null),u=Object(j.a)(o,2),l=u[0],b=u[1],d=Object(n.useState)(""),x=Object(j.a)(d,2),f=x[0],m=x[1],v=Object(n.useState)(0),g=Object(j.a)(v,2),w=g[0],C=g[1],y=Object(n.useState)(!1),S=Object(j.a)(y,2),E=S[0],A=S[1],D=Object(n.useState)(""),G=Object(j.a)(D,2),L=G[0],R=G[1];Object(n.useEffect)((function(){if(null!==l){A(!0);var e=O.ref().child("".concat(t.uid,"/").concat(l.name));e.put(l).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;C(t)}),(function(e){R(e)}),Object(P.a)(U.a.mark((function t(){var c;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDownloadURL();case 2:c=t.sent,m(c);case 4:case"end":return t.stop()}}),t)}))))}}),[t.uid,l]);var J=Object(n.useCallback)((function(e){var t=e.target.files[0];t&&["image/png","image/jpeg"].includes(t.type)?(b(t),R("")):(b(null),R("png \ub610\ub294 jpg \uc774\ubbf8\uc9c0 \ud30c\uc77c\ub9cc \uc9c0\uc6d0\ud569\ub2c8\ub2e4."))}),[]),W=Object(n.useCallback)((function(e){i(e.target.value)}),[]),q=Object(n.useCallback)(function(){var e=Object(P.a)(U.a.mark((function e(c){var r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),""!==s){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,r={text:s,createdAt:h(),creatorId:t.uid,imageUrl:f},e.next=7,p.collection("tweets").add(r);case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0),R("\uc624\ub958 \ubc1c\uc0dd");case 13:i(""),b(null),m(""),R("");case 17:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),[s,t.uid,f]),B=Object(n.useCallback)(Object(P.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(null),m(""),e.next=4,O.refFromURL(f).delete();case 4:case"end":return e.stop()}}),e)}))),[f]);return Object(r.jsx)("div",{className:"upload-form-block",children:Object(r.jsxs)("form",{onSubmit:q,children:[Object(r.jsxs)("div",{className:"text-form",children:[Object(r.jsx)("input",{type:"text",placeholder:"\uc624\ub298 \ud558\ub8e8\ub294 \uc5b4\ub560\ub098\uc694?",value:s,onChange:W,maxLength:120,required:!0}),Object(r.jsx)("button",{children:Object(r.jsx)(k.a,{icon:N.a})})]}),Object(r.jsxs)("div",{className:"image-form",children:[!l&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"file",accept:"image/*",onChange:J}),Object(r.jsx)(k.a,{icon:N.b})]}),Object(r.jsx)("p",{children:"\uc0ac\uc9c4 \ucd94\uac00\ud558\uae30"})]}),l&&Object(r.jsxs)("div",{className:"output",children:[Object(r.jsx)("span",{className:"file-name",children:l.name}),f&&Object(r.jsxs)("div",{className:"image-preview",children:[Object(r.jsx)("img",{src:f,alt:l.name}),Object(r.jsx)("div",{className:"remove-preview",onClick:B,children:Object(r.jsx)(k.a,{icon:N.d})})]}),E&&Object(r.jsx)(I,{progress:w,setIsShowProgress:A,imageUrl:f})]}),L&&Object(r.jsx)("div",{className:"error",children:L})]})]})})},D=function(){var e=Object(n.useContext)(f).currentUser;return Object(r.jsx)("div",{className:"tweet-factory-block",children:Object(r.jsx)(A,{currentUser:e})})},G=function(){return Object(r.jsx)("div",{className:"home-block",children:Object(r.jsxs)("div",{className:"home-inner",children:[Object(r.jsx)(y,{}),Object(r.jsx)(D,{})]})})},L=function(e){var t=e.children;return Object(r.jsx)("div",{className:"auth-block",children:Object(r.jsxs)("div",{className:"white-box",children:[Object(r.jsx)("div",{className:"logo-area",children:Object(r.jsx)(k.a,{icon:C.a})}),t]})})},R={login:"\ub85c\uadf8\uc778",register:"\ud68c\uc6d0\uac00\uc785"},J=function(e){var t=e.type,c=e.form,n=e.onChange,a=e.onSubmitEmail,s=e.onSubmitGoogle,i=e.error,u=R[t],j=c.email,l=c.username,b=c.password;return Object(r.jsxs)("div",{className:"auth-form-block",children:[Object(r.jsx)("h2",{children:u}),Object(r.jsxs)("form",{children:[Object(r.jsx)("input",{type:"email",name:"email",placeholder:"\uc774\uba54\uc77c",value:j,onChange:n,required:!0}),"register"===t&&Object(r.jsx)("input",{type:"text",name:"username",placeholder:"\uc774\ub984",value:l,onChange:n,required:!0}),Object(r.jsx)("input",{type:"password",name:"password",placeholder:"\ube44\ubc00\ubc88\ud638",value:b,onChange:n,required:!0}),i&&Object(r.jsx)("p",{className:"error",children:i}),Object(r.jsx)("button",{className:"email-button",onClick:l?a(j,b,l):a(j,b),children:u})]}),Object(r.jsx)("div",{className:"divider",children:"OR"}),Object(r.jsx)("div",{className:"social-button",children:Object(r.jsx)("button",{className:"google-button",onClick:s,children:"Google\ub85c \uacc4\uc18d\ud558\uae30"})}),Object(r.jsx)("div",{className:"link",children:"login"===t?Object(r.jsx)(o.b,{to:"/register",children:"\ud68c\uc6d0\uac00\uc785"}):Object(r.jsx)(o.b,{to:"/login",children:"\ub85c\uadf8\uc778"})})]})},W=c(24);function q(e,t){return Object(v.a)(Object(v.a)({},e),{},Object(W.a)({},t.name,t.value))}function B(e){var t=Object(n.useReducer)(q,e),c=Object(j.a)(t,2),r=c[0],a=c[1];return[r,Object(n.useCallback)((function(e){a(e.target)}),[a])]}var z=function(){var e=B({email:"",password:""}),t=Object(j.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(""),i=Object(j.a)(s,2),o=i[0],u=i[1],l=Object(n.useCallback)((function(e,t){return function(){var c=Object(P.a)(U.a.mark((function c(r){return U.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r.preventDefault(),c.prev=1,c.next=4,d.signInWithEmailAndPassword(e,t);case 4:c.next=10;break;case 6:c.prev=6,c.t0=c.catch(1),console.error(c.t0),u("\ub85c\uadf8\uc778 \uc2e4\ud328");case 10:case"end":return c.stop()}}),c,null,[[1,6]])})));return function(e){return c.apply(this,arguments)}}()}),[]),O=Object(n.useCallback)(function(){var e=Object(P.a)(U.a.mark((function e(t){var c;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,c=new b.auth.GoogleAuthProvider,e.next=5,d.signInWithPopup(c);case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0),u("\ub85c\uadf8\uc778 \uc2e4\ud328");case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(r.jsx)(J,{type:"login",form:c,onChange:a,onSubmitEmail:l,onSubmitGoogle:O,error:o})},F=function(){var e=Object(n.useContext)(f).currentUser,t=Object(u.g)();return Object(n.useEffect)((function(){e&&t.push("/")}),[t,e]),Object(r.jsx)(L,{children:Object(r.jsx)(z,{})})},M=function(){var e=B({email:"",password:"",username:""}),t=Object(j.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(""),i=Object(j.a)(s,2),o=i[0],u=i[1],l=Object(n.useCallback)((function(e,t,c){return function(){var r=Object(P.a)(U.a.mark((function r(n){var a,s;return U.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.preventDefault(),r.prev=1,r.next=4,d.createUserWithEmailAndPassword(e,t);case 4:return a=r.sent,s=a.user,r.next=8,s.updateProfile(Object(v.a)(Object(v.a)({},s),{},{displayName:c}));case 8:r.next=14;break;case 10:r.prev=10,r.t0=r.catch(1),console.error(r.t0),u("\ud68c\uc6d0\uac00\uc785 \uc2e4\ud328");case 14:case"end":return r.stop()}}),r,null,[[1,10]])})));return function(e){return r.apply(this,arguments)}}()}),[]),O=Object(n.useCallback)(function(){var e=Object(P.a)(U.a.mark((function e(t){var c;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,c=new b.auth.GoogleAuthProvider,e.next=5,d.signInWithPopup(c);case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0),u("\ud68c\uc6d0\uac00\uc785 \uc2e4\ud328");case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(r.jsx)(J,{type:"register",form:c,onChange:a,onSubmitEmail:l,onSubmitGoogle:O,error:o})},T=function(){var e=Object(n.useContext)(f).currentUser,t=Object(u.g)();return Object(n.useEffect)((function(){e&&t.push("/")}),[t,e]),Object(r.jsx)(L,{children:Object(r.jsx)(M,{})})},H=function(){return Object(r.jsx)("div",{children:"Profile Page"})},K=function(){return Object(r.jsx)(m,{children:Object(r.jsx)(o.a,{children:Object(r.jsxs)(u.d,{children:[Object(r.jsx)(w,{path:"/profile",children:Object(r.jsx)(H,{})}),Object(r.jsx)(u.b,{path:"/register",children:Object(r.jsx)(T,{})}),Object(r.jsx)(u.b,{path:"/login",children:Object(r.jsx)(F,{})}),Object(r.jsx)(w,{path:"/",children:Object(r.jsx)(G,{})})]})})})};i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(K,{})}),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.3874e502.chunk.js.map